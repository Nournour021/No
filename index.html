<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اشتراك في قناة YouTube</title>
    <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
    <h1>اشتراك في قناة YouTube</h1>
    <button id="loginButton">تسجيل الدخول باستخدام Google</button>
    <button id="subscribeButton" disabled>اشتراك في القناة</button>

    <script>
        var CLIENT_ID = '338834409904-ad4jrk0r7cgqrgnc1rg04fqrhevikkj9.apps.googleusercontent.com'; // معرّف العميل
        var API_KEY = 'AIzaSyB1FlvJD5Cdv39oe9k5hBHPGCjBM1UeuRQ'; // مفتاح الواجهة البرمجية API
        var CHANNEL_ID = 'UC9m1E1BvZQDYSyADFkEHPgg'; // معرف القناة
        var SCOPES = 'https://www.googleapis.com/auth/youtube.force-ssl';

        var subscribeButton = document.getElementById('subscribeButton');
        var loginButton = document.getElementById('loginButton');

        // تحميل مكتبة OAuth2
        function handleClientLoad() {
            gapi.load('client:auth2', initClient);
        }

        // تهيئة OAuth2
        function initClient() {
            gapi.client.init({
                apiKey: API_KEY,
                clientId: CLIENT_ID,
                scope: SCOPES,
                discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"]
            }).then(function () {
                var authInstance = gapi.auth2.getAuthInstance();
                loginButton.onclick = function () {
                    authInstance.signIn().then(function () {
                        subscribeButton.disabled = false;
                    });
                };

                subscribeButton.onclick = function () {
                    subscribeToChannel();
                };
            });
        }

        // وظيفة الاشتراك في القناة
        function subscribeToChannel() {
            gapi.client.youtube.subscriptions.insert({
                part: 'snippet',
                resource: {
                    snippet: {
                        resourceId: {
                            kind: 'youtube#channel',
                            channelId: CHANNEL_ID
                        }
                    }
                }
            }).then(function (response) {
                console.log('تم الاشتراك بنجاح:', response);
            }, function (error) {
                console.error('حدث خطأ أثناء الاشتراك:', error);
            });
        }

        // بدء تحميل مكتبة Google API
        handleClientLoad();
    </script>
</body>
</html>